#YouTodo (working title) is an open-source task management app that gamifies task management!
## This project was originally created using the TodoApp example from Supabase.  You can find that original project here https://github.com/supabase/supabase/tree/master/examples/nextjs-todo-list


- Frontend:
    - [create-react-app](https://reactjs.org/docs/create-a-new-react-app.html). React Framework for building single-page applications.
    - [Tailwind](https://tailwindcss.com/) for styling and layout.
    - [Supabase.js](https://supabase.io/docs/library/getting-started) for user management and realtime data syncing.
- Backend:
    - [app.supabase.io/](https://app.supabase.io/): hosted Postgres database with restful API for usage with Supabase.js.


## Demo

-not added-

## Getting Started.
Anyone is welcome to contribute to this project.  To do so, you will need a SupaBase.io account (free), as well as Node JS, and NPM installed on your computer.  This project will contain everything you need to set up your own test DB/API with SupaBase so that you can test and merge back into the master branch to be deployed on the official website.  

## Build from scratch
### 1. Create new project
Sign up to Supabase - [https://app.supabase.io](https://app.supabase.io) and create a new project. Wait for your database to start.

### 2. Run "Todo List" Quickstart
Once your database has started, Click "SQL" in the left menu.  Then "+ New Query"  Copy the contents of "StartQuery.sql" and click "run" at the bottom of the SQL window.  This will set up the database/API. 

### 3. Get the URL and Key
Go to the Project Settings (the cog icon), open the API tab, and find your API URL and `anon` key, you'll need these in the next step.

The `anon` key is your client-side API key. It allows "anonymous access" to your database, until the user has logged in. Once they have logged in, the keys will switch to the user's own login token. This enables row level security for your data. 

### 4. Clone the REPO and set it up
Clone this repo (git clone https://github.com/nruffilo/YouTodoProj.git) into the directory you want to be working out of.  Create a file named ".env.local" in the root directory.  You will need to add 2 keys to it.
REACT_APP_SUPABASE_KEY=(YOUR_SUPABASE_KEY)
REACT_APP_SUPABASE_URL=(YOUR_SUPABASE_URL)

Once that is saved, you'll need to get all the NPM packages.  You can do this by running:
"npm install"
You'll also need to install tailwind
"npm install tailwindcss"

(remember to run these from the YouTodoProj directory where the files are, not the directory you initially cloned into.)

Once you have this set up, you can run "npm run start" to run a test application and see your code in action!

## Contributing
Contributions are welcome to all.  I do ask that you look at the issues and attempt to address one of them, but if you see a typo, style, or have an idea for an awesome feature, you're welcome to create a pull request.  For those who are less familiar with git, below is a simple primer on how to create a branch, commit your code, and create a pull request.

"git pull origin dev": This will take the latest codebase in master (the main branch)

## Supabase details

### Postgres Row level security

This project uses very high-level Authorization using Postgres' Role Level Security.
When you start a Postgres database on Supabase, we populate it with an `auth` schema, and some helper functions.
When a user logs in, they are issued a JWT with the role `authenticated` and thier UUID.
We can use these details to provide fine-grained control over what each user can and cannot do.

This is a trimmed-down schema, with the policies:

```sql
create table todos (
  id bigint generated by default as identity primary key,
  user_id uuid references auth.users not null,
  task text check (char_length(task) > 3),
  is_complete boolean default false,
  inserted_at timestamp with time zone default timezone('utc'::text, now()) not null
);

alter table todos enable row level security;

create policy "Individuals can create todos." on todos for
    insert with check (auth.uid() = user_id);

create policy "Individuals can view their own todos. " on todos for
    select using (auth.uid() = user_id);

create policy "Individuals can update their own todos." on todos for
    update using (auth.uid() = user_id);

create policy "Individuals can delete their own todos." on todos for
    delete using (auth.uid() = user_id);
```

## Authors

- [Supabase](https://supabase.io)

Supabase is open source, we'd love for you to follow along and get involved at https://github.com/supabase/supabase
